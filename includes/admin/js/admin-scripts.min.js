function crpClearCache(){const e=document.getElementById("cache_clear");return e&&(e.disabled=!0,e.textContent=crp_admin_data.strings.clearing_cache,e.insertAdjacentHTML("beforeend",' <span class="spinner is-active"></span>')),jQuery.post(ajaxurl,{action:"crp_clear_cache",security:crp_admin_data.security},function(t,s,n){if(e){e.disabled=!1,e.textContent=crp_admin_data.strings.clear_cache;const t=e.querySelector(".spinner");t&&t.remove()}alert(t.message)},"json").fail(function(){if(e){e.disabled=!1,e.textContent=crp_admin_data.strings.clear_cache;const t=e.querySelector(".spinner");t&&t.remove()}}),!1}function crpHandleThumbnailStyleChange(){const e=document.querySelector('select[name="crp_settings[crp_styles]"]');if(!e)return;const t={rounded_thumbs:{targets:["show_excerpt","show_author","show_date","post_thumb_op"],messageKey:"rounded_style_message"},thumbs_grid:{targets:["show_excerpt","show_author","show_date","post_thumb_op"],messageKey:"rounded_style_message"},text_only:{targets:["post_thumb_op"],messageKey:"text_only_message"}};function s(){const s=e.value,n=t[s];if(["show_excerpt","show_author","show_date","post_thumb_op"].forEach(e=>{const t=n&&n.targets.includes(e),s="post_thumb_op"===e?"radio":"checkbox",c="radio"===s?`input[name="crp_settings[${e}]"]`:`input[type="checkbox"][name="crp_settings[${e}]"]`,o=document.querySelectorAll(c);if(o.length>0){const e=o[0].closest(".form-field")||o[0].parentElement,c=e.querySelector(".crp-js-message");if(t)if(o.forEach(e=>{e.disabled=!0,"checkbox"===s&&(e.checked=!1)}),c)c.textContent!==crp_admin_data.strings[n.messageKey]&&(c.textContent=crp_admin_data.strings[n.messageKey]);else{const t=document.createElement("p");t.className="description crp-js-message",t.style.color="#9B0800",t.textContent=crp_admin_data.strings[n.messageKey],e.appendChild(t)}else o.forEach(e=>{e.disabled=!1}),c&&c.remove()}}),["rounded_thumbs","thumbs_grid"].includes(s)){const e=document.querySelector('input[name="crp_settings[post_thumb_op]"][value="inline"]'),t=document.querySelector('input[name="crp_settings[post_thumb_op]"][value="thumbs_only"]'),s=document.querySelector('input[name="crp_settings[post_thumb_op]"]:checked');s&&![e,t].includes(s)&&e&&(e.checked=!0)}if("text_only"===s){const e=document.querySelector('input[name="crp_settings[post_thumb_op]"][value="text_only"]');e&&(e.checked=!0)}}s(),e.addEventListener("change",s)}function crpCopyToClipboard(e){const t=document.getElementById(e);if(!t)return;const s=t.parentElement.querySelector(".crp-copy-button");s&&navigator.clipboard.writeText(t.textContent).then(()=>{const e=s.querySelector(".dashicons");e.classList.remove("dashicons-clipboard"),e.classList.add("dashicons-yes"),s.classList.add("copied"),s.title=crpAdmin.copied,setTimeout(()=>{e.classList.remove("dashicons-yes"),e.classList.add("dashicons-clipboard"),s.classList.remove("copied"),s.title=crpAdmin.copyToClipboard},2e3)}).catch(()=>{const e=s.querySelector(".dashicons");e.classList.remove("dashicons-clipboard"),e.classList.add("dashicons-warning"),s.classList.add("error"),s.title=crpAdmin.copyError,setTimeout(()=>{e.classList.remove("dashicons-warning"),e.classList.add("dashicons-clipboard"),s.classList.remove("error"),s.title=crpAdmin.copyToClipboard},2e3)})}function crpAddCopyButton(e){const t=document.getElementById(e);if(!t)return;const s=document.createElement("button");s.type="button",s.className="crp-copy-button",s.setAttribute("aria-label",crpAdmin.copyToClipboard),s.title=crpAdmin.copyToClipboard,s.onclick=()=>crpCopyToClipboard(e);const n=document.createElement("span");n.className="screen-reader-text",n.textContent=crpAdmin.copyToClipboard;const c=document.createElement("span");c.className="dashicons dashicons-clipboard",c.setAttribute("aria-hidden","true"),s.appendChild(n),s.appendChild(c);const o=t.parentElement;o&&o.classList.contains("crp-code-wrapper")&&o.appendChild(s)}jQuery(document).ready(function(e){crpHandleThumbnailStyleChange()});