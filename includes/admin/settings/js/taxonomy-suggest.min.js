jQuery(document).ready((function(t){t.fn.WZTagsSuggest=function(e){var o,n,a=t(this),u=(e=e||{}).taxonomy||a.attr("data-wp-taxonomy")||"category",c=e.tag_search||a.attr("data-wp-action")||"crp_tag_search";function i(t){return t.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)}function r(t){return i(t).pop()}delete e.taxonomy,delete e.tag_search,e=t.extend({minLength:2,position:{my:"left top+2",at:"left bottom",collision:"none"},source:function(e,a){var i;n!==e.term?(i=r(e.term),n!==e.term?(t.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:c,tax:u,q:i}}).done((function(t){o=t,a(t)})),n=e.term):a(o)):a(o)},search:function(){if(r(this.value).length<2)return!1},focus:function(t,e){t.preventDefault()},select:function(t,e){var o=i(this.value),n=e.item.value;return-1!==n.indexOf(",")&&(n='"'+n+'"'),o.pop(),o.push(n),o.push(""),this.value=o.join(", "),!1}},e),a.on("keydown",(function(e){e.keyCode===t.ui.keyCode.TAB&&t(this).autocomplete("instance").menu.active&&e.preventDefault()})).autocomplete(e)},t(".category_autocomplete").each((function(e,o){t(o).WZTagsSuggest()})),t(".widget-liquid-right, #customize-controls").on("click",".category_autocomplete",(function(){t(".category_autocomplete").WZTagsSuggest()}))}));