jQuery(document).ready(function(t){t.fn.WZTagsSuggest=function(e){var n,a,o=t(this),u=(e=e||{}).taxonomy||o.attr("data-wp-taxonomy")||"category",i=e.tag_search||o.attr("data-wp-action")||"wz_tags_search";function c(t){return t.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/)}function r(t){return c(t).pop()}delete e.taxonomy,delete e.tag_search,e=t.extend({minLength:2,position:{my:"left top+2",at:"left bottom",collision:"none"},source:function(e,o){var c;a!==e.term?(c=r(e.term),a!==e.term?(t.ajax({type:"POST",dataType:"json",url:ajaxurl,data:{action:i,tax:u,q:c}}).done(function(t){n=t,o(t)}),a=e.term):o(n)):o(n)},search:function(){if(r(this.value).length<2)return!1},focus:function(t,e){t.preventDefault()},select:function(t,e){var n=c(this.value),a=e.item.value;return-1!==a.indexOf(",")&&(a='"'+a+'"'),n.pop(),n.push(a),n.push(""),this.value=n.join(", "),!1}},e),o.on("keydown",function(e){e.keyCode===t.ui.keyCode.TAB&&t(this).autocomplete("instance").menu.active&&e.preventDefault()}).autocomplete(e)},t(".category_autocomplete").each(function(e,n){t(n).WZTagsSuggest()})});