!function(t){"use strict";t(document).ready((function(){document.querySelectorAll(".ts_autocomplete").forEach((function(e){const a=e.getAttribute("data-wp-prefix")||"WZ",n=window[`${a}TomSelectSettings`]||WZTomSelectSettings,o=e.getAttribute("data-wp-action")||n.action,i=e.getAttribute("data-wp-nonce")||n.nonce,s=e.getAttribute("data-wp-endpoint")||n.endpoint,u=n.forms,r=n.tags,l=n.custom_fields,c=n.strings,d="forms"===s?u:"tags"===s?r:"custom_fields"===s?l:[],p="category"===s||"post_tag"===s||s.includes("tax")||"public_taxonomies"===s;if(!d||!Array.isArray(d))return;const v=d.map((t=>({value:t.id,text:t.name}))),m=e.value.split(",").map((t=>t.trim())).filter(Boolean);if(p&&m.length>0){const t=m.map((t=>{const e=t.match(/^(.*)\s+\(.*:\d+\)$/);return{value:t,text:e?e[1]:t}})),e=[...v];t.forEach((t=>{e.some((e=>e.value===t.value))||e.push(t)})),v.length=0,v.push(...e)}!p&&m.length>0&&m.forEach((t=>{v.some((e=>e.value===t))||v.push({value:t,text:t})}));let f={};const g=e.getAttribute("data-ts-config");if(g)try{f=JSON.parse(g)}catch(t){}const h={...{plugins:["dropdown_input","clear_button","remove_button"],valueField:"value",labelField:"text",searchField:["text","value"],options:v,items:m,persist:!0,createOnBlur:!1,create:!1,render:{no_results:(t,e)=>`<div class="no-results">${c.no_results.replace("%s",e(t.input))}</div>`,option:(t,e)=>p||t.text===t.value?`<div>${e(t.value)}</div>`:`<div>${e(t.text)} (${e(t.value)})</div>`,item:(t,e)=>p||t.text===t.value?`<div>${e(t.value)}</div>`:`<div>${e(t.text)} (${e(t.value)})</div>`},load:function(e,a){e.length?t.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:o,nonce:i,q:e,endpoint:s},error:function(){a()},success:function(t){t.success&&Array.isArray(t.data)?a(t.data):a()}}):a()}},...f};try{new TomSelect(e,h)}catch(t){}}))}))}(jQuery);